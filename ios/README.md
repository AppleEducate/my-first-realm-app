# iOS Prerequisites

Just before we get started we need a few things setup. 

Xcode 9.0 or later

An Xcode project targeting iOS 8 or above
Swift projects must use Swift 3.0 or later
CocoaPods 1.2.x or later


We recommend using CocoaPods to install the libraries. You can install Cocoapods by following the installation instructions. We also support Dynamic and Carthage as alternatives to installing the SDKs

## Adding RealmSwift SDK with Cocoapods 

To enable connecting to Realm Cloud for your iOS App, you'll need to add `RealmSwift`.

The best way to add RealmSwift to your app is using [Cocoapods](https://cocoapods.org/). Make sure you have verion 1.2.x or higher! 

In your Podfile add 

```
pod 'RealmSwift', '~> 3.1.0`
```

*Be sure to add 3.1.x or higher* for optimal Realm Cloud Support

When you're done run 

```
pod install --repo-update
```

Then open your `.xworkspace` file generated by Cocoapods to work on your project.


## Adding RealmSwift SDK with Carthage 

To enable connecting to Realm Cloud for your iOS App, you'll need to add `RealmSwift`.

If you prefer [Carthage](https://github.com/Carthage/Carthage#installing-carthage) , insure that you have verion 0.17.x or higher. 

In your Cartfile add 

```
github "realm/realm-cocoa"
```

Then run 

```
carthage update
```

After Carthage builds Realm Cocoa, drag RealmSwift.framework and Realm.framework from the appropriate platform directory in Carthage/Build/ to the “Linked Frameworks and Libraries” section of your Xcode project’s “General” settings.

On your application target’s __“Build Phases”__ settings tab, click the __+__ icon and choose __“New Run Script Phase”__. Create a Run Script with the following contents:

```
/usr/local/bin/carthage copy-frameworks
```

and add the paths to the frameworks you want to use under “Input Files”, e.g.:

```
$(SRCROOT)/Carthage/Build/iOS/Realm.framework<br />$(SRCROOT)/Carthage/Build/iOS/RealmSwift.framework
```

# iOS ToDo App Tutorial

> Skip the tutorial and check out the Github Source Code? https://github.com/realm/my-first-realm-app/tree/master/ios

The easiest way to learn about Realm Cloud is with a simple To Do app that only has 2 view controllers! __Make sure you have your Realm Cloud Instance URL if you don't have that already!__

## Preparing your App 

In `AppDelegate.swift` replace your main launch function with: 

```swift
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    // Override point for customization after application launch.
    
    window = UIWindow(frame: UIScreen.main.bounds)
    window?.makeKeyAndVisible()
    window?.rootViewController = UINavigationController(rootViewController: WelcomeViewController())
    
    return true
}
```

This will set your first ViewController as a `WelcomeViewController.swift` that will check if you can properly connect to a Realm Cloud instance. 


### Authentication 

First create a new view controller called `WelcomeViewController.swift` and import with `import RealmSwift`

In the `viewDidAppear` section of your app add the following snippet and replace the string "MY_REALM_AUTH_URL" with your `https://realm.url` that you've copied from the Realm Cloud Portal.

```swift
override func viewDidAppear(_ animated: Bool) {
        super.viewDidAppear(animated)
        title = "Welcome"
        
        if let _ = SyncUser.current {
            self.navigationController?.pushViewController(ItemsTableViewController(), animated: true)
        } else {
            let alertController = UIAlertController(title: "Login to Realm Cloud", message: "Supply a nice nickname!", preferredStyle: .alert)
            
            alertController.addAction(UIAlertAction(title: "Login", style: .default, handler: { [unowned self]
                alert -> Void in
                let textField = alertController.textFields![0] as UITextField
                let creds = SyncCredentials.nickname(textField.text!, isAdmin: true)
                SyncUser.logIn(with: creds, server: URL(string: "MY_REALM_AUTH_URL")!, onCompletion: { [weak self](user, err) in
                    if let user = user {
                        self?.navigationController?.pushViewController(ItemsTableViewController(), animated: true)
                    } else if let error = err {
                        fatalError(error.localizedDescription)
                    }
                })
                
                // do something with textField
            }))
            alertController.addAction(UIAlertAction(title: "Cancel", style: .cancel, handler: nil))
            alertController.addTextField(configurationHandler: {(textField : UITextField!) -> Void in
                textField.placeholder = "A Name for your user"
            })
            self.present(alertController, animated: true, completion: nil)
        }
    }
```
We are just going to login using a nice "Nickname" from an alert. Our "Nickname" auth provider is an excellent __development__ credential for you quickly get started with Realm Sync without the need to remember credentials. You'll need to turn this provider off __when you go__ in to production so that random strangers cannot login.

Nickname Auth can easily be constructed with:

``` swift
let creds = SyncCredentials.nickname("sally", isAdmin: true)
```

You'll notice that `isAdmin` is set to true. We will visit this later, but for the sake of getting started quickly we recommend that you keep this to true to encounter less friction when learning more about Realm. 

In order to use Realm with a Sync instance, you'll need to login with the credentials pointed your Realm Cloud Instance's URL. 

```swift
SyncUser.logIn(with: creds, server: URL(string: "https://my-cool-app-url")!, onCompletion: { [weak self](user, err) in
    if let _ = user {
        self?.navigationController?.pushViewController(ItemsTableViewController(), animated: true)
    } else if let error = err {
        fatalError(error.localizedDescription)
    }
})
```

When the login is successful, you can push to `ItemsTableViewController.swift` from the navigationController instance. In the event it fails, you'll get a log message detailing what went wrong. 


